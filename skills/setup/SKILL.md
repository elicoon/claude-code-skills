---
name: setup
description: First-run onboarding for Personal OS / claude-code-skills - configure paths, integrations, and preferences
---

# /claude-code-skills:setup

**Purpose:** Conduct first-run onboarding for users who have installed the claude-code-skills but haven't configured them yet. Creates a `.atlas.yaml` config file and optional folder structure.

## When to Use

Use this skill when:
- First installing the claude-code-skills from a plugin marketplace or public repo
- Setting up the Personal OS in a new workspace
- Reconfiguring or updating an existing setup

This skill is **idempotent** - running it again offers to update existing configuration.

---

## Instructions for Claude

When this skill is invoked, conduct a **minimal, friendly conversation** to gather configuration. Don't overwhelm with questions - use sensible defaults and only ask what's necessary.

### Step 1: Check for Existing Configuration

Look for an existing `.atlas.yaml` in the current working directory.

**If config exists:**
> I found an existing `.atlas.yaml` configuration.
>
> **Current settings:**
> - Name: [name]
> - Backlog: [path]
> - Reference: [path]
> - Calendar: [integration]
> - Docs: [integration]
>
> Would you like to update any of these settings, or is this a fresh setup that should replace the existing config?

Then proceed based on user response - either update specific fields or restart setup.

**If no config exists:**
> Welcome to the Personal OS setup! I'll ask a few quick questions to get things configured.
>
> This will create a `.atlas.yaml` config file and optionally set up folder structure for your tasks and learnings.

Proceed to Step 2.

---

### Step 2: Gather User Context (Minimal)

Ask these two questions together to minimize back-and-forth:

> **Quick intro:**
> 1. What should I call you?
> 2. Any constraints I should keep in mind when prioritizing your work? (e.g., "limited to evenings", "no meetings on Fridays") - optional, press Enter to skip

**Defaults:**
- Name: Required
- Constraints: Empty array if skipped

---

### Step 3: Configure Paths

Present path options with sensible defaults:

> **Where should I keep your data?**
>
> I'll create these folders (or detect existing ones):
>
> | Purpose | Default | Description |
> |---------|---------|-------------|
> | Tasks | `./backlog/tasks` | Your backlog items |
> | Reference | `./reference` | Learnings, memories, preferences |
> | Plans | `./docs/plans` | Implementation plans and handoffs |
> | Postmortems | `./docs/postmortems` | Incident analyses |
>
> **Options:**
> 1. Use defaults (recommended)
> 2. Customize paths
> 3. Point to existing folders

If user chooses option 1, proceed with defaults.

If user chooses option 2 or 3, ask:
> Which paths would you like to customize? Enter the new paths:
> - Tasks folder: [current]
> - Reference folder: [current]
> - Plans folder: [current]
> - Postmortems folder: [current]

**Detection:** Before creating folders, check if they already exist. If they do, ask:
> I found existing folders at [paths]. Should I:
> 1. Use these existing folders (recommended)
> 2. Create new folders with different names

---

### Step 4: Configure Integrations

Ask about integrations in a single prompt:

> **Integrations (all optional):**
>
> Which services do you use? This helps skills like `/orient` show calendar context.
>
> 1. **Calendar:** Google Calendar / Outlook / Apple Calendar / none
> 2. **Docs/Notes:** Google Drive / Notion / Obsidian / local markdown / none
> 3. **Other tools:** (e.g., GitHub, Linear, Jira) - comma-separated or skip

**Defaults:**
- Calendar: `none`
- Docs: `local`
- Other: Empty array

**Important:** Don't ask follow-up questions about each integration. Just record the choice. Integration-specific setup (OAuth, API keys) happens when those features are first used.

---

### Step 5: Create Configuration File

Generate `.atlas.yaml` with gathered information:

```yaml
# Atlas - Project Configuration
# Generated by /claude-code-skills:setup on [YYYY-MM-DD]
version: 1

paths:
  backlog: ./backlog/tasks
  reference: ./reference
  plans: ./docs/plans
  postmortems: ./docs/postmortems

user:
  name: "[Name]"
  constraints:
    - "[Constraint 1 if provided]"

integrations:
  calendar: google | outlook | apple | none
  docs: google-drive | notion | obsidian | local | none
  other:
    - github
    - linear

server:
  port: 3491
  serve_script: ./serve.js
```

Write the file to the current working directory.

---

### Step 6: Create Directory Structure

After creating `.atlas.yaml`, ensure all configured paths exist:

1. **Check if each path exists:**
   - `{paths.backlog}` (default: `backlog/tasks/`)
   - `{paths.reference}` (default: `reference/`)
   - `{paths.plans}` (default: `docs/plans/`)
   - `{paths.postmortems}` (default: `docs/postmortems/`)

2. **Create any missing directories** using `mkdir -p` equivalent (creates parent directories as needed).

3. **Report what was created:**
   > **Directories:**
   > - Created: `backlog/tasks/`, `docs/plans/`
   > - Already existed: `reference/`

If all directories already exist, acknowledge this and move on:
> All configured directories already exist.

---

### Step 7: Create Starter Files (Optional)

After creating directories, offer to create starter files:

> **Starter files:**
> I can create template files to get you started:
>
> 1. **Backlog index** - Format reference for tasks
> 2. **Reference templates** - Identity, lessons, memories scaffolds
> 3. **Both** (recommended for new setups)
> 4. **Skip** - I'll figure it out as I go
>
> Which would you like?

**If creating backlog index:** Create `backlog/index.md`:

```markdown
# Backlog

## Format

Each task is a separate file in `backlog/tasks/` with this structure:

### [Task Title]
- **Project:** [project name if applicable]
- **Status:** draft | not started | in progress | blocked | done
- **Priority:** high | medium | low
- **Planned completion:** [date or none]
- **Actual completion:** [date if done]
- **Blockers:** [blockers or none]
- **Notes:** [notes]
- **Added:** [YYYY-MM-DD]
- **Updated:** [YYYY-MM-DD]

#### Next steps
1. [First action]
2. [Second action]

## Status Definitions

| Status | When to Use |
|--------|-------------|
| `draft` | Unconfirmed ideas, brainstorming |
| `not started` | Committed tasks ready to begin |
| `in progress` | Actively being worked on |
| `blocked` | Cannot continue due to dependency |
| `done` | Task completed |
```

**If creating reference templates:** Create minimal scaffolds:

`reference/identity/why.md`:
```markdown
# Why

Core motivations and what I'm optimizing for.

## Goals

[To be filled in through /claude-code-skills:review]

## Values

[To be filled in through /claude-code-skills:review]
```

`reference/identity/constraints.md`:
```markdown
# Constraints

Time, financial, physical, and other limitations.

## Current Constraints

[To be filled in through /claude-code-skills:review]
```

`reference/identity/preferences.md`:
```markdown
# Preferences

How I like to work, what helps me be productive.

## Work Style

[To be filled in through /claude-code-skills:review]

## Communication

[To be filled in through /claude-code-skills:review]
```

`reference/lessons/lessons.md`:
```markdown
# Lessons

Behavioral patterns and approaches that work (or don't).

*Last updated: [YYYY-MM-DD]*

## Future Learnings

[New lessons captured via /claude-code-skills:review will be added here]
```

`reference/memories/memories.md`:
```markdown
# Memories

Key facts, decisions, and commitments to remember.

## Memories

[New memories captured via /claude-code-skills:review will be added here]
```

---

### Step 8: Verify Setup

After all files are created, verify the setup:

1. Read back `.atlas.yaml` and display it
2. List created folders
3. Confirm everything is in place

> **Setup Complete!**
>
> **Configuration:** `.atlas.yaml`
> ```yaml
> [full config contents]
> ```
>
> **Folders created:**
> - `backlog/tasks/`
> - `reference/` (with subdirectories)
> - `docs/plans/`
>
> **Starter files:** [list if created]
>
> **Next steps:**
> - Use `/claude-code-skills:add` to capture your first task
> - Use `/claude-code-skills:orient` to review your backlog and plan your day
> - Use `/claude-code-skills:review` to capture learnings after work sessions

---

## Conversation Principles

1. **Minimal questions** - Don't ask unnecessary questions. Use sensible defaults.
2. **Batched prompts** - Ask multiple questions in single prompts when possible.
3. **Quick setup** - The whole conversation should take under 2 minutes.
4. **No interrogation** - If user gives terse answers, accept them. Don't probe.
5. **Idempotent** - Running again should offer to update, not fail.
6. **Flexible** - Work with what the user has (existing folders, partial config).

---

## Error Handling

| Issue | Response |
|-------|----------|
| **Can't create folders** | "I couldn't create [folder]. Do you have write permissions? You can create it manually and re-run setup." |
| **Config file write fails** | "I couldn't write `.atlas.yaml`. Check file permissions and try again." |
| **Existing config is malformed** | "The existing `.atlas.yaml` has syntax errors. Would you like me to create a fresh config?" |
| **User wants to abort** | "No problem. Run `/claude-code-skills:setup` when you're ready to configure." |

---

## Files Read

- `.atlas.yaml` (if exists) - Existing configuration
- `backlog/tasks/` (if exists) - Check for existing backlog
- `reference/` (if exists) - Check for existing reference layer

## Files Written

- `.atlas.yaml` - Main configuration file
- `backlog/index.md` - Backlog format reference (optional)
- `backlog/tasks/.gitkeep` - Placeholder for git
- `backlog/specs/.gitkeep` - Placeholder for git
- `reference/identity/preferences.md` - Preferences template (optional)
- `reference/lessons/lessons.md` - Lessons template (optional)
- `reference/memories/memories.md` - Memories template (optional)
- `docs/plans/.gitkeep` - Placeholder for git
- `docs/postmortems/.gitkeep` - Placeholder for git

## Integrations

- **File system** - Creating directories and files
- **Git** - Optional commit of initial setup

---

## Examples

### Example 1: Quick setup with defaults

**User:** `/claude-code-skills:setup`

**Claude:**
> Welcome to the Personal OS setup! I'll ask a few quick questions to get things configured.
>
> **Quick intro:**
> 1. What should I call you?
> 2. Any constraints I should keep in mind when prioritizing? (optional)

**User:** Alex. No constraints.

**Claude:**
> Got it, Alex. I'll set up with default paths.
>
> **Integrations (all optional):**
> - Calendar: Google Calendar / Outlook / Apple Calendar / none
> - Docs: Google Drive / Notion / Obsidian / local / none
> - Other tools: (e.g., GitHub, Linear) - or skip

**User:** Google Calendar, local, GitHub

**Claude:**
> Perfect. Creating your setup...
>
> [Creates folders and config]
>
> **Setup Complete!**
>
> **Configuration:** `.atlas.yaml`
> ```yaml
> version: 1
>
> paths:
>   backlog: ./backlog/tasks
>   reference: ./reference
>   plans: ./docs/plans
>   postmortems: ./docs/postmortems
>
> user:
>   name: "Alex"
>   constraints: []
>
> integrations:
>   calendar: google
>   docs: local
>   other:
>     - github
>
> server:
>   port: 3491
>   serve_script: ./serve.js
> ```
>
> **Next steps:**
> - `/claude-code-skills:add` - Capture your first task
> - `/claude-code-skills:orient` - Plan your day

---

### Example 2: Existing config update

**User:** `/claude-code-skills:setup`

**Claude:**
> I found an existing `.atlas.yaml` configuration.
>
> **Current settings:**
> - Name: Alex
> - Backlog: ./backlog/tasks
> - Calendar: google
>
> Would you like to update any settings?

**User:** Add Notion for docs

**Claude:**
> Updating docs integration to Notion...
>
> [Updates config file]
>
> **Updated `.atlas.yaml`:**
> ```yaml
> integrations:
>   calendar: google
>   docs: notion
> ```
>
> Done! Your docs integration is now set to Notion.

---

### Example 3: Custom paths

**User:** `/claude-code-skills:setup`

**Claude:**
> Welcome! What should I call you?

**User:** Jordan. I want to use a different folder structure.

**Claude:**
> No problem. What paths would you like to use?
>
> - Tasks folder (default: ./backlog/tasks):
> - Reference folder (default: ./reference):
> - Plans folder (default: ./docs/plans):

**User:** Tasks in ./tasks, reference in ./brain, keep plans default

**Claude:**
> Got it. I'll use:
> - Tasks: `./tasks`
> - Reference: `./brain`
> - Plans: `./docs/plans`
>
> [Proceeds with setup]

---

## Reminders

- **This is onboarding, not interrogation** - Keep it quick and friendly
- **Defaults are fine** - Most users won't customize paths
- **Verify the output** - Always show the created config file
- **Idempotent** - Running again should work gracefully
- **Integration setup is deferred** - Don't ask for OAuth or API keys during setup
